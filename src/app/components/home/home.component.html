<div class="home-container">

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Detecta mensajes<br>de phishing en<br>segundos</h1>
        <p class="hero-subtitle">Protege tu informaci√≥n digital con ML</p>

        <div class="hero-stats">
          <div class="stat-item">
            <div class="stat-icon">üìä</div>
            <div class="stat-text">
              <strong>M√°s de 5000</strong><br>
              URL verificadas
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">üåê</div>
            <div class="stat-text">
              <strong>M√°s del 90 %</strong><br>
              de precisi√≥n
            </div>
          </div>
        </div>

        <!-- Quick Search Box -->
        <div class="quick-search">
          <input
            type="text"
            class="quick-search-input"
            [(ngModel)]="quickUrl"
            placeholder="www.google.com"
            (keyup.enter)="iniciarAnalisisRapido()"
          >
          <button
            type="button"
            class="quick-search-btn"
            (click)="iniciarAnalisisRapido()"
          >
            Analizar ahora
          </button>
        </div>
      </div>

      <div class="hero-image">
        <div class="hero-illustration">
          <div class="image-glow"></div>
          <div class="image-container">
            <img
              src="assets/manHeroImage.jpg"
              alt="Persona usando tablet para verificar enlaces de phishing"
              class="hero-img"
            >
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section class="form-section" id="form-section">
    <h2>Verifica tu enlace sospechoso</h2>

    <form class="analisis-form" (ngSubmit)="analizarAhora()">
      <div class="form-group">
        <label for="url">URL del mensaje *</label>
        <div class="input-with-icon">
          <span class="input-icon">üîó</span>
          <input
            type="text"
            id="url"
            class="form-input"
            [(ngModel)]="urlAnalisis"
            name="url"
            placeholder="https://ejemplo.com"
            [disabled]="isAnalyzing"
            required
          >
        </div>
      </div>

      <div class="form-group">
        <label for="mensaje">Mensaje completo (opcional)</label>
        <div class="input-with-icon">
          <span class="input-icon">‚úâÔ∏è</span>
          <textarea
            id="mensaje"
            class="form-textarea"
            [(ngModel)]="mensajeCompleto"
            name="mensaje"
            placeholder="Ingresa el mensaje que recibiste..."
            [disabled]="isAnalyzing"
            rows="4"
          ></textarea>
        </div>
      </div>

      <div class="form-group">
        <label for="aplicacion">Aplicaci√≥n</label>
        <select
          id="aplicacion"
          class="form-select"
          [(ngModel)]="aplicacion"
          name="aplicacion"
          [disabled]="isAnalyzing"
        >
          <option value="web">Navegador Web</option>
          <option value="whatsapp">WhatsApp</option>
          <option value="email">Correo Electr√≥nico</option>
          <option value="telegram">Telegram</option>
          <option value="messenger">Messenger</option>
          <option value="sms">SMS</option>
          <option value="otro">Otro</option>
        </select>
      </div>

      <button
        type="submit"
        class="btn-analizar"
        [disabled]="isAnalyzing"
      >
        <span *ngIf="!isAnalyzing">Analizar ahora</span>
        <span *ngIf="isAnalyzing">
          <span class="spinner"></span> Analizando...
        </span>
      </button>
    </form>
  </section>

  <!-- Resultado Section -->
  <section class="resultado-section" *ngIf="mostrarResultado" id="resultado-analisis">
    <div class="resultado-card" [ngClass]="esPhishing ? 'resultado-peligroso' : 'resultado-seguro'">

      <div class="resultado-header">
        <div class="resultado-icon-circle" [ngClass]="esPhishing ? 'icon-peligro' : 'icon-seguro'">
          <span class="resultado-icon">{{ esPhishing ? '!' : '‚úì' }}</span>
        </div>
        <h2>{{ esPhishing ? 'Phishing Detectado' : 'Sitio Seguro' }}</h2>
      </div>

      <div class="resultado-body">
        <div class="nivel-riesgo">
          <div class="nivel-riesgo-header">
            <span class="nivel-label">Nivel de riesgo:</span>
            <span class="nivel-porcentaje">{{ porcentajeRiesgo }}%</span>
          </div>
          <div class="nivel-barras">
            <div
              class="barra"
              *ngFor="let num of getNivelRiesgoArray()"
              [ngClass]="{
                'barra-activa': num <= nivelRiesgo,
                'barra-peligro': esPhishing,
                'barra-seguro': !esPhishing
              }"
            ></div>
          </div>
        </div>

        <div class="resultado-detalles">
          <div class="detalles-column">
            <h3>Detalles:</h3>
            <ul class="detalles-list">
              <li *ngFor="let detalle of detalles">
                <span class="bullet">‚Ä¢</span> {{ detalle }}
              </li>
            </ul>
          </div>

          <div class="detalles-column">
            <h3>Recomendaciones:</h3>
            <ul class="detalles-list">
              <li *ngFor="let recomendacion of recomendaciones">
                <span class="bullet">‚Ä¢</span> {{ recomendacion }}
              </li>
            </ul>
          </div>
        </div>

         <button class="btn-reporte-completo" (click)="verReporteCompleto()">
          <span class="btn-icon">{{ isAuthenticated() ? 'üìä' : 'üîí' }}</span>
          {{ isAuthenticated() ? 'Ver reporte completo' : 'Iniciar sesi√≥n para ver el reporte completo' }}
        </button>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section" id="faq-section">
    <div class="faq-container">
      <h2 class="faq-title">Preguntas<br>frecuentes<br>(FAQ)</h2>

      <div class="faq-list">
        <div class="faq-item" *ngFor="let faq of faqs; let i = index">
          <button
            class="faq-question"
            (click)="toggleFaq(i)"
            [class.active]="faq.expanded"
          >
            <span>{{ faq.pregunta }}</span>
            <span class="faq-icon">{{ faq.expanded ? '‚àí' : '+' }}</span>
          </button>
          <div class="faq-answer" [class.expanded]="faq.expanded">
            <p>{{ faq.respuesta }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Community Stats Section -->
  <section class="stats-section">
    <div class="stats-header">
      <h2 class="stats-title">Estado de la comunidad<br><span class="brand-highlight">AntiWebPhish</span></h2>
      <p class="stats-subtitle">Datos actualizados en tiempo real</p>
    </div>

    <div class="stats-grid">
      <!-- Estad√≠sticas superiores -->
      <div class="stat-card stat-card-urls">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
          </svg>
        </div>
        <div class="stat-content">
          <h3>URLs analizadas esta semana</h3>
          <p class="stat-number">{{ urlsAnalizadasSemana }}</p>
          <div class="stat-trend">
            <span [class]="tendenciaUrlsSemana >= 0 ? 'trend-up' : 'trend-down'">
              {{ tendenciaUrlsSemana >= 0 ? '+' : '' }}{{ tendenciaUrlsSemana | number:'1.1-1' }}%
            </span> vs semana anterior
          </div>
        </div>
      </div>

      <div class="stat-card stat-card-total">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
        </div>
        <div class="stat-content">
          <h3>Total de an√°lisis</h3>
          <p class="stat-number">{{ totalAnalisis }}</p>
          <div class="stat-trend">
            <span [class]="tendenciaAnalisisMes >= 0 ? 'trend-up' : 'trend-down'">
              {{ tendenciaAnalisisMes >= 0 ? '+' : '' }}{{ tendenciaAnalisisMes | number:'1.1-1' }}%
            </span> este mes
          </div>
        </div>
      </div>

      <div class="stat-card stat-card-users">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
        </div>
        <div class="stat-content">
          <h3>Usuarios registrados</h3>
          <p class="stat-number">{{ usuariosRegistrados }}</p>
          <div class="stat-trend">
            <span class="trend-up">Total</span> en el sistema
          </div>
        </div>
      </div>

      <!-- Distribuci√≥n global -->
      <div class="stat-card stat-chart">
        <h3 class="chart-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
            <path d="M2 12h20"></path>
          </svg>
          Distribuci√≥n global
        </h3>
        <div class="chart-container">
          <div class="donut-chart-wrapper">
            <svg viewBox="0 0 200 200" class="donut-chart">
              <!-- C√≠rculo de fondo -->
              <circle
                cx="100"
                cy="100"
                r="70"
                fill="transparent"
                stroke="rgba(51, 65, 85, 0.6)"
                stroke-width="40"
              />
              <!-- C√≠rculo de amenazas (phishing) -->
              <circle
                cx="100"
                cy="100"
                r="70"
                fill="transparent"
                stroke="url(#gradient-danger)"
                stroke-width="40"
                [attr.stroke-dasharray]="(distribucionGlobal.porcentajePhishing * 4.4) + ' 440'"
                stroke-dashoffset="0"
                transform="rotate(-90 100 100)"
                class="chart-segment phishing-segment"
              />
              <!-- Gradiente para el segmento de phishing -->
              <defs>
                <linearGradient id="gradient-danger" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#dc2626;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#b91c1c;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="gradient-safe" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                </linearGradient>
              </defs>
              <!-- Centro con gradiente -->
              <circle
                cx="100"
                cy="100"
                r="50"
                fill="#1e293b"
              />
            </svg>
            <div class="chart-center-text">
              <div class="center-percentage">{{ distribucionGlobal.porcentajePhishing | number:'1.0-0' }}%</div>
              <div class="center-label">Amenazas</div>
            </div>
          </div>
          <div class="chart-legend">
            <div class="legend-item legend-danger">
              <span class="legend-box phishing"></span>
              <div class="legend-content">
                <span class="legend-label">Phishing detectado</span>
                <span class="legend-value">{{ distribucionGlobal.porcentajePhishing | number:'1.1-1' }}%</span>
              </div>
            </div>
            <div class="legend-item legend-safe">
              <span class="legend-box legit"></span>
              <div class="legend-content">
                <span class="legend-label">URLs Leg√≠timas</span>
                <span class="legend-value">{{ distribucionGlobal.porcentajeLegitimas | number:'1.1-1' }}%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top aplicaciones -->
      <div class="stat-card stat-apps">
        <h3 class="chart-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 20h9"></path>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
          </svg>
          Top aplicaciones con intentos de phishing
        </h3>
        <div class="apps-bars">
          <div class="app-bar" *ngFor="let app of topAplicacionesPhishing; let i = index">
            <div class="app-info">
              <span class="app-name">{{ app.aplicacion }}</span>
              <span class="app-percentage">{{ app.porcentaje | number:'1.0-0' }}%</span>
            </div>
            <div class="bar-track">
              <div
                class="bar-fill"
                [ngClass]="'bar-' + (i + 1)"
                [style.width.%]="app.porcentaje">
                <span class="bar-glow"></span>
              </div>
            </div>
          </div>

          <!-- Mensaje cuando no hay datos -->
          <div *ngIf="topAplicacionesPhishing.length === 0" class="no-data-message">
            <p>No hay datos de aplicaciones disponibles</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-grid">
        <!-- Logo y descripci√≥n -->
        <div class="footer-column footer-about">
          <div class="footer-logo">
            <span class="logo-icon">üõ°Ô∏è</span>
            <span class="logo-text">AntiWebPhish</span>
          </div>
          <p class="footer-description">
            Protegemos tu informaci√≥n digital detectando amenazas de phishing con ML.
          </p>
          <div class="footer-social">
            <a href="#" class="social-link" aria-label="Facebook">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="GitHub">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Enlaces r√°pidos -->
        <div class="footer-column">
          <h4 class="footer-heading">Enlaces r√°pidos</h4>
          <ul class="footer-links">
            <li><a href="/home">Inicio</a></li>
            <li><a href="/reportes">Mis Reportes</a></li>
            <li><a href="#form-section">Analizar URL</a></li>
            <li><a href="#faq-section">FAQ</a></li>
          </ul>
        </div>

        <!-- Recursos -->
        <div class="footer-column">
          <h4 class="footer-heading">Recursos</h4>
          <ul class="footer-links">
            <li><a href="#">Documentaci√≥n</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Centro de ayuda</a></li>
          </ul>
        </div>

        <!-- Legal -->
        <div class="footer-column">
          <h4 class="footer-heading">Legal</h4>
          <ul class="footer-links">
            <li><a href="#">T√©rminos de servicio</a></li>
            <li><a href="#">Pol√≠tica de privacidad</a></li>
            <li><a href="#">Cookies</a></li>
            <li><a href="#">Contacto</a></li>
          </ul>
        </div>
      </div>

      <!-- Copyright -->
      <div class="footer-bottom">
        <p class="copyright">
          ¬© 2025 AntiWebPhish. Todos los derechos reservados.
        </p>

      </div>
    </div>
  </footer>

</div>
